(function(e){function t(t){for(var a,n,o=t[0],c=t[1],l=t[2],d=0,v=[];d<o.length;d++)n=o[d],i[n]&&v.push(i[n][0]),i[n]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);u&&u(t);while(v.length)v.shift()();return r.push.apply(r,l||[]),s()}function s(){for(var e,t=0;t<r.length;t++){for(var s=r[t],a=!0,o=1;o<s.length;o++){var c=s[o];0!==i[c]&&(a=!1)}a&&(r.splice(t--,1),e=n(n.s=s[0]))}return e}var a={},i={app:0},r=[];function n(t){if(a[t])return a[t].exports;var s=a[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=e,n.c=a,n.d=function(e,t,s){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(s,a,function(t){return e[t]}.bind(null,a));return s},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var u=c;r.push(["56d7","chunk-vendors"]),s()})({"56d7":function(e,t,s){"use strict";s.r(t);var a=s("2b0e"),i=s("31bd"),r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"app"}},[s("div",{staticClass:"header"},[s("router-link",{attrs:{to:"/"}},[s("Icon",{attrs:{name:"doba"}})],1),s("div",{staticClass:"search-wrapper"},[s("Search")],1)],1),s("div",{staticClass:"content"},[s("router-view")],1),s("footer",[e._m(0),s("a",{attrs:{href:"https://github.com/sinchang/doba"}},[s("Icon",{attrs:{name:"github"}})],1)])])},n=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("p",[s("span",[e._v("Doba Movie is based on")]),s("a",{attrs:{href:"https://github.com/haishanh/doba-react"}},[e._v(" doba-react")]),s("span",[e._v("made with ")]),s("span",{staticClass:"red"},[e._v("love")]),s("span",[e._v(" by sinchang")])])}],o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("svg",{class:[e.name,"icon"]},[s("use",{attrs:{"xlink:href":"#"+e.name}})])])},c=[],l={name:"icon",props:{name:{type:String}}},u=l,d=s("2877"),v=Object(d["a"])(u,o,c,!1,null,null,null),m=v.exports,p=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{class:["search-bar",{focused:e.focused}]},[s("div",{staticClass:"search-icon"},[s("Icon",{attrs:{name:"search"}})],1),s("input",{directives:[{name:"model",rawName:"v-model",value:e.keyword,expression:"keyword"}],staticClass:"search-input",attrs:{type:"text",placeholder:"搜索..."},domProps:{value:e.keyword},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)},focus:function(t){e.focused=!0},blur:function(t){e.focused=!1},input:function(t){t.target.composing||(e.keyword=t.target.value)}}})])])},h=[],b={name:"search",data(){return{focused:!1,keyword:""}},methods:{search(){this.$store.dispatch("searchHandle",this.keyword)}},components:{Icon:m}},f=b,_=Object(d["a"])(f,p,h,!1,null,null,null),g=_.exports,y={name:"app",components:{Icon:m,Search:g}},C=y,w=Object(d["a"])(C,r,n,!1,null,null,null),j=w.exports,k=s("8c4f"),O=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"intheater title"},[e._v("正在上映的电影")]),s("MovieList",{attrs:{movies:e.movies}}),s("Loading")],1)},$=[],x=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("ul",e._l(e.movies,function(e,t){return s("Movie",{key:e.id,attrs:{movie:e,bg:"subject-hero-bg"}})}),1)])},E=[],I=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("section",{staticClass:"subject-header"},[s("section",{class:["subject-hero",e.size]},[s("div",{staticClass:"subject-hero-container"},[s("router-link",{attrs:{to:"/subject/"+e.movie.id}},[s("img",{attrs:{src:e.movie.images.large}})]),s("div",{staticClass:"subject-hero-info"},[s("div",{staticClass:"subject-title"},[s("div",{staticClass:"title-1"},[e._v(e._s(e.movie.title))]),s("div",{staticClass:"title-2"},[e._v(e._s(e.movie.original_title))])]),s("div",{staticClass:"rating"},[s("Icon",{attrs:{name:"star"}}),s("span",{staticClass:"average"},[e._v(e._s(e.movie.rating.average))]),s("span",{staticClass:"max"},[e._v("/10")])],1),s("div",[e._v(e._s(e.movie.year)+" / "),e._l(e.movie.genres,function(t,a){return s("span",[e._v(e._s(t)+",")])})],2),s("div",[e._v("导演： "),e._l(e.movie.directors,function(t,a){return s("span",[s("router-link",{attrs:{to:"/celebrity/"+t.id}},[e._v(e._s(t.name))])],1)})],2),s("div",[e._v("主演： "),e._l(e.movie.casts,function(t,a){return s("span",[s("router-link",{attrs:{to:"/celebrity/"+t.id}},[e._v(e._s(t.name)+" / ")])],1)})],2),s("a",{attrs:{href:e.movie.alt}},[s("div",{staticClass:"douban-link"},[s("Icon",{attrs:{name:"douban"}})],1)])])],1),s("div",{class:e.bg,style:{backgroundImage:"url('"+e.movie.images.large+"')"}})])])},T=[],L={name:"movie",computed:{size(){return this.$route.params.id?"small":""}},props:{movie:{type:Object,required:!0},bg:{type:String,required:!0}},components:{Icon:m}},S=L,H=Object(d["a"])(S,I,T,!1,null,null,null),M=H.exports,N={name:"movie-list",props:{movies:{type:Array,required:!0}},components:{Movie:M}},D=N,q=Object(d["a"])(D,x,E,!1,null,null,null),A=q.exports,G=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e.loading?s("div",{staticClass:"loading"},[s("div",{staticClass:"left circle"}),s("div",{staticClass:"right circle"})]):e._e()])},P=[],R={name:"loading",computed:{loading(){return this.$store.state.loading}}},F=R,J=Object(d["a"])(F,G,P,!1,null,null,null),W=J.exports,z={name:"inTheaters",computed:{movies(){return this.$store.state.inTheaters.movies}},mounted(){this.$store.dispatch("fetchInTheaters")},components:{MovieList:A,Loading:W}},B=z,Y=Object(d["a"])(B,O,$,!1,null,null,null),K=Y.exports,U=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("Movie",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],attrs:{movie:e.movie,bg:"app-bg"}}),s("section",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],staticClass:"subject-casts"},[s("div",{staticClass:"casts-title"},[e._v("主演")]),s("div",{staticClass:"subject-casts-flex"},e._l(e.movie.casts,function(e,t){return s("cast",{key:e.id,attrs:{cast:e}})}),1)]),s("section",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],staticClass:"subject-content"},[s("div",{staticClass:"title"},[e._v("剧情简介")]),s("p",[e._v(e._s(e.movie.summary))])]),s("Loading")],1)},Q=[],V=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"wrap"},[s("router-link",{attrs:{to:"/celebrity/"+e.cast.id}},[s("img",{attrs:{src:e.cast.avatars.medium}}),s("div",[e._v(e._s(e.cast.name))])])],1)])},X=[],Z={name:"Cast",props:{cast:{type:Object,required:!0}}},ee=Z,te=Object(d["a"])(ee,V,X,!1,null,null,null),se=te.exports,ae={name:"subject",computed:{movie(){return this.$store.state.subject.movie},loading(){return!this.$store.state.loading}},mounted(){this.$store.dispatch("fetchSubject",this.$store.state.route.params.id)},components:{Movie:M,Cast:se,Loading:W}},ie=ae,re=Object(d["a"])(ie,U,Q,!1,null,null,null),ne=re.exports,oe=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],staticClass:"celebrity-page"},[s("div",{staticClass:"content-title"},[e._v(e._s(e.celebrity.name)+" "+e._s(e.celebrity.name_en))]),s("div",{staticClass:"celebrity-profile"},[s("div",{staticClass:"celebrity-image"},[s("img",{attrs:{src:e.celebrity.avatars.large}})]),s("div",{staticClass:"celebrity-info"},[s("div",[e._v("性别："+e._s(e.celebrity.gender))]),e.celebrity.born_place?s("div",[e._v("出生地："+e._s(e.celebrity.born_place))]):e._e(),s("div",[s("a",{attrs:{href:e.celebrity.alt}},[s("div",{staticClass:"douban-link"},[s("Icon",{attrs:{name:"douban"}})],1)])])])]),s("div",{staticClass:"celebrity-works"},[s("div",{staticClass:"title"},[e._v("作品")]),s("div",{staticClass:"celebrity-works-flex"},e._l(e.celebrity.works,function(t){return s("div",[s("router-link",{attrs:{to:"/subject/"+t.subject.id}},[s("img",{attrs:{src:t.subject.images.medium}}),s("div",[e._v(e._s(t.subject.title))])])],1)}),0)])]),s("Loading")],1)},ce=[],le={name:"celebrity",computed:{celebrity(){return this.$store.state.celebrity.celebrity},loading(){return!this.$store.state.loading}},mounted(){this.$store.dispatch("fetchCelebrity",this.$store.state.route.params.id)},components:{Icon:m,Loading:W}},ue=le,de=Object(d["a"])(ue,oe,ce,!1,null,null,null),ve=de.exports,me=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e.keyword?s("div",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],staticClass:"intheater title"},[e._v('搜索的 "'+e._s(e.keyword)+'" 结果')]):e._e(),s("MovieList",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],attrs:{movies:e.results}}),s("Loading")],1)},pe=[],he={name:"search-result",computed:{results(){return this.$store.state.results},keyword(){return this.$store.state.keyword},loading(){return!this.$store.state.loading}},mounted(){this.$store.dispatch("searchHandle")},components:{Loading:W,MovieList:A}},be=he,fe=Object(d["a"])(be,me,pe,!1,null,null,null),_e=fe.exports;a["a"].use(k["a"]);var ge=new k["a"]({mode:"hash",routes:[{path:"/",name:"inTheaters",component:K},{path:"/subject/:id",name:"subject",component:ne},{path:"/celebrity/:id",name:"celebrity",component:ve},{path:"/search*",name:"searchResult",component:_e}]}),ye=s("2f62");const Ce=e=>{const t={method:"GET",headers:{"Content-Type":"application/json"}};We.commit("SHOW_LOADING"),e=Object.assign({},t,e),a["a"].jsonp(`https://api.douban.com/v2/movie/${e.url}`).then(t=>{We.commit("HIDE_LOADING"),e.successCallback&&e.successCallback(t)},e=>{We.commit("HIDE_LOADING"),alert(e.statusText)})},we="FETCH_INTHEATERS",je="FETCH_SUBJECT",ke="FETCH_CELEBRITY",Oe="SHOW_LOADING",$e="HIDE_LOADING",xe="SEARCH",Ee="GET_KEYWORD",Ie={movies:[]},Te={[we](e,t){e.movies=t}},Le={fetchInTheaters({commit:e}){Ce({url:"in_theaters",successCallback:t=>{e(we,t.subjects)}})}};var Se={state:Ie,mutations:Te,actions:Le};const He={movie:{}},Me={[je](e,t){e.movie=t}},Ne={fetchSubject({commit:e},t){Ce({url:`subject/${t}`,successCallback:t=>{e(je,t)}})}};var De={state:He,mutations:Me,actions:Ne};const qe={celebrity:{}},Ae={[ke](e,t){e.celebrity=t}},Ge={fetchCelebrity({commit:e},t){Ce({url:`celebrity/${t}`,successCallback:t=>{e(ke,t)}})}};var Pe={state:qe,mutations:Ae,actions:Ge};a["a"].use(ye["a"]);const Re={loading:!1,keyword:"",results:[]},Fe={[Oe](e){e.loading=!0},[$e](e){e.loading=!1},[xe](e,t){e.results=t},[Ee](e,t){e.keyword=t}},Je={searchHandle(e,t){const s=t||e.state.route.query.q;ge.push({path:"/search",query:{q:s}}),Ce({url:`search?q=${s}`,successCallback:function(t){e.commit(xe,t.subjects),e.commit(Ee,s)}})}};var We=new ye["a"].Store({state:Re,mutations:Fe,actions:Je,modules:{inTheaters:Se,subject:De,celebrity:Pe}}),ze=s("ec7e"),Be=s.n(ze);s("b107");Object(i["sync"])(We,ge),a["a"].use(Be.a),a["a"].use(Be.a,5e3),a["a"].config.productionTip=!1,new a["a"]({el:"#app",router:ge,store:We,render:e=>e(j)})},b107:function(e,t,s){}});
//# sourceMappingURL=app.898b4a07.js.map